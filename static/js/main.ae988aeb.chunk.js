(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],{24:function(e,t,a){e.exports=a(36)},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),s=a(22),i=a(23),o=a(11),u={episodes:[],favourites:[]},m=Object(n.createContext)(u),p=function(e,t){switch(t.type){case"FETCH_DATA":return Object(o.a)({},e,{episodes:t.payload});case"ADD_FAV":return Object(o.a)({},e,{favourites:[].concat(Object(i.a)(e.favourites),[t.payload])});case"SUB_FAV":return Object(o.a)({},e,{favourites:t.payload});default:return e}},d=function(e){var t=Object(n.useReducer)(p,u),a=Object(s.a)(t,2),c=a[0],l=a[1];return r.a.createElement(m.Provider,{value:{state:c,dispatch:l}},e.children)},f=a(7),v=a(5),E=a(13),h=a.n(E),b=a(19),y=r.a.lazy((function(){return a.e(0).then(a.bind(null,37))})),A=function(){var e=Object(n.useContext)(m),t=e.state,a=e.dispatch,c=function(){var e=Object(b.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.tvmaze.com/singlesearch/shows?q=castlevania&embed=episodes",e.next=3,fetch("https://api.tvmaze.com/singlesearch/shows?q=castlevania&embed=episodes",{method:"GET",headers:{"Access-Control-Allow-Origin":"*"}});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",a({type:"FETCH_DATA",payload:n._embedded.episodes}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){0===t.episodes.length&&c()}));var l={episodes:t.episodes,favourites:t.favourites,toggleFavAction:function(e){if(t.favourites.includes(e)){var n=t.favourites.filter((function(t){return t.id!==e.id}));return a({type:"SUB_FAV",payload:n})}return a({type:"ADD_FAV",payload:e})}};return r.a.createElement("main",{className:"main"},r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null,r.a.createElement("h4",null,"Loading..."))},r.a.createElement("section",{className:"episode-layout"},r.a.createElement(y,l))))},j=function(){var e=Object(n.useContext)(m).state;return r.a.createElement("header",{className:"header"},r.a.createElement("div",null,r.a.createElement(f.b,{to:"/"},r.a.createElement("h1",{className:"brand"},"Castlevania")),r.a.createElement("p",null,"Pick your favourite episode!")),r.a.createElement("ul",{className:"nav"},r.a.createElement("li",null,r.a.createElement(f.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(f.b,{to:"/favs"},"Favourites: ",e.favourites.length))))},O=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,"My React Typescript Castlevania App \xa9 2020."))},g=r.a.lazy((function(){return a.e(0).then(a.bind(null,37))})),F=function(){var e=Object(n.useContext)(m),t=e.state,a=e.dispatch,c={episodes:t.favourites,favourites:t.favourites,toggleFavAction:function(e){if(t.favourites.includes(e)){var n=t.favourites.filter((function(t){return t.id!==e.id}));return a({type:"SUB_FAV",payload:n})}return a({type:"ADD_FAV",payload:e})}};return r.a.createElement("main",{className:"main"},r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null,r.a.createElement("h4",null,"Loading..."))},r.a.createElement("section",{className:"episode-layout"},r.a.createElement(g,c))))};a(35);var x=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,null,r.a.createElement(j,null),r.a.createElement(v.c,null,r.a.createElement(v.a,{component:A,exact:!0,path:"/"}),r.a.createElement(v.a,{component:F,exact:!0,path:"/favs"})),r.a.createElement(O,null)))};l.a.render(r.a.createElement(d,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null))),document.getElementById("root"))}},[[24,2,3]]]);
//# sourceMappingURL=main.ae988aeb.chunk.js.map